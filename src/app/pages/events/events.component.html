<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800">
  <!-- Hero Section -->
  <div class="relative bg-gradient-to-r from-primary-500 to-secondary-400 animate-gradient-move dark:from-primary-900 dark:to-secondary-900 shadow-lg">
    <div class="max-w-7xl mt-12 mx-auto px-4 sm:px-6 lg:px-8">
      <div class="py-12 md:py-16 flex flex-col items-center text-center">
        <h1 class="text-3xl drop-shadow-lg md:text-4xl font-bold text-white dark:text-gray-100 mb-4">
          Events & News
        </h1>
        <p class="text-xl text-white dark:text-gray-200 drop-shadow-lg max-w-3xl">
          Stay updated with the latest events and news from Sikkim
        </p>
      </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="absolute -bottom-6 left-0 right-0 flex justify-center">
      <div class="sm:grid sm:grid-cols-2 gap-2 bg-white/95 dark:bg-gray-800/95 shadow-lg rounded-2xl px-1.5 py-1.5 items-center border border-gray-200 dark:border-gray-700 max-w-full 
           flex sm:block overflow-x-auto no-scrollbar whitespace-nowrap" style="min-width: 0;">
        <ng-container *ngFor="let tab of tabs">
          <button (click)="switchTab(tab.id)"
            class="inline-flex shadow-lg cursor-pointer items-center px-3 sm:px-3 py-2 sm:py-2 mx-1 rounded-full font-semibold 
            text-base sm:text-lg transition-all duration-200 focus:outline-none focus:ring-2
            focus:ring-primary-400 border-gray-300 border hover:scale-[1.04] active:scale-100"
            [ngClass]="activeTab === tab.id
              ? 'bg-primary-500 text-white dark:bg-primary-700 dark:text-white border-primary-500 dark:border-primary-400 shadow-lg'
              : 'bg-white text-primary-600 dark:bg-gray-700 dark:text-primary-300 hover:bg-primary-100 dark:hover:bg-primary-800 border-gray-200 dark:border-gray-700'"
            style="transition: box-shadow 0.2s, background 0.2s, color 0.2s, border 0.2s, transform 0.15s;">
            <i class="fas mr-2 text-lg sm:text-xl" [ngClass]="tab.icon"></i>
            <span>{{ tab.title }}</span>
          </button>
        </ng-container>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="max-w-7xl mx-auto px-6 md:px-16 2xl:px-0 py-8 mt-4">
    <!-- Search Bar -->
    <div class="max-w-3xl mx-auto mb-8">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 flex items-center p-1">
        <div class="flex-1 flex items-center px-4">
          <i class="fas fa-search text-gray-400 mr-3"></i>
          <input type="text" 
                 [placeholder]="activeTab === 'events' ? 'Search events by name, location or date...' : 'Search news by title or content...'" 
                 class="w-full py-3 outline-none bg-transparent text-gray-700 dark:text-gray-200"
                 [(ngModel)]="searchTerm"
                 (keyup.enter)="search()">
        </div>
        <button (click)="search()"
                class="px-4 py-2 text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300">
          <i class="fas fa-search"></i>
        </button>
        <button *ngIf="searchTerm" 
                (click)="searchTerm = ''; search()"
                class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 px-4">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>

    <!-- Events Section -->
    <div *ngIf="activeTab === 'events'" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-700">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Event Name</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Date</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Location</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Status</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Actions</th>
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
            <tr *ngFor="let event of filteredEvents | paginate: { itemsPerPage: 10, currentPage: p }"
                class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200">
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900 dark:text-white">{{ event.name }}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-500 dark:text-gray-300">
                  {{ event.date | date:'longDate' }}
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-500 dark:text-gray-300">{{ event.location }}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <ng-container [ngSwitch]="getEventStatus(event.date)">
                  <span *ngSwitchCase="'upcoming'" 
                        class="px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                    Upcoming
                  </span>
                  <span *ngSwitchCase="'ongoing'" 
                        class="px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
                    Ongoing
                  </span>
                  <span *ngSwitchCase="'ended'" 
                        class="px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200">
                    Ended
                  </span>
                </ng-container>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                <ng-container *ngIf="event.pdfUrl">
                  <button (click)="viewEvent(event.pdfUrl)"
                          class="inline-flex items-center text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300">
                    <i class="fas fa-file-pdf mr-1"></i>
                    View PDF
                  </button>
                </ng-container>
                <ng-container *ngIf="!event.pdfUrl">
                  <button (click)="viewEventDetails(event)" disabled="true"
                          class="inline-flex items-center text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300">
                    <i class="fas fa-info-circle mr-1"></i>
                    Awaiting Details
                  </button>
                </ng-container>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="mt-4 flex justify-center">
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
      </div>
    </div>

    <!-- News Section -->
    <div *ngIf="activeTab === 'news'" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <div *ngFor="let item of filteredNews | paginate: { itemsPerPage: 9, currentPage: p }"
           class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300">
        <div class="aspect-w-16 aspect-h-9 relative">
          <img [src]="item.imageUrl" 
               [alt]="item.title"
               loading="lazy"
               (error)="imageService.handleImageError($event)"
               class="w-full h-48 object-cover transition-transform duration-300 hover:scale-105">
          <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"></div>
        </div>
        <div class="px-6 py-4">
          <div class="text-sm text-gray-500 dark:text-gray-400 mb-2 flex items-center">
            <i class="far fa-calendar-alt mr-2"></i>
            {{ item.date | date:'longDate' }}
          </div>
          <h3 class="text-xl text-justify font-semibold text-gray-900 dark:text-white mb-3 line-clamp-2">
            {{ item.title }}
          </h3>
          <p class="text-gray-600 text-justify h-48 p-x-2 dark:text-gray-300 mb-4 custom-scrollbar overflow-y-auto">
            {{ item.content }}
          </p>
          <div class="pt-2 border-t border-gray-200 dark:border-gray-700">
            <ng-container *ngIf="item.pdfUrl">
              <button (click)="viewEvent(item.pdfUrl)"
                      class="inline-flex items-center text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300 font-medium transition-colors duration-200">
                <i class="fas fa-file-pdf mr-2"></i>
                Read More
              </button>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="activeTab === 'news'" class="mt-6 flex justify-center">
      <pagination-controls (pageChange)="p = $event"></pagination-controls>
    </div>
  </div>
</div>


