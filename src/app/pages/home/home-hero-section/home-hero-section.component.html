<link
  rel="preload"
  as="image"
  href="assets/Images/website-images/landing-hero-bg.webp"
/>

<section
  class="relative min-h-screen pt-[70px] w-full overflow-hidden flex flex-wrap items-stretch justify-center"
>
  <div
    class="absolute top-24 right-6 sm:right-8 lg:right-12 z-[4] group cursor-pointer animate-slide-fade-in"
    (click)="navigateToHeritageWalk()"
  >
    <div
      class="animate-bounce flex items-center gap-2 sm:gap-3 bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-full px-4 py-2 border border-gray-200/40 dark:border-gray-600/40 hover:shadow-lg hover:shadow-primary-400/30 dark:hover:shadow-primary-400/30 transition-all duration-300"
    >
      <div class="relative">
        <i
          class="fas fa-map-marked-alt text-primary-600 dark:text-primary-300 transform transition-transform duration-500 group-hover:scale-110 group-hover:rotate-6 text-xl"
        ></i>
        <div
          class="absolute inset-0 rounded-full border border-primary-400/40 dark:border-primary-300/30 animate-pulse"
        ></div>
      </div>
      <span
        class="text-gray-800 dark:text-white/80 text-xs sm:text-sm font-semibold group-hover:text-primary-500 dark:group-hover:text-primary-300 transition-colors duration-300"
      >
        Heritage Walk
      </span>
    </div>
  </div>

  <div
    *ngIf="deferredPrompt"
    class="absolute top-24 left-6 sm:left-8 lg:left-12 z-[4] group cursor-pointer animate-slide-fade-in"
    (click)="installApp()"
  >
    <div
      class="animate-bounce flex items-center gap-2 sm:gap-3 bg-white/90 dark:bg-gray-800/90 backdrop-blur-md rounded-full px-4 py-2 border border-gray-200/40 dark:border-gray-600/40 hover:shadow-lg hover:shadow-secondary-400/30 dark:hover:shadow-secondary-400/30 transition-all duration-300"
    >
      <div class="relative">
        <i
          class="fas fa-download text-secondary-600 dark:text-secondary-300 transform transition-transform duration-500 group-hover:scale-110 group-hover:rotate-6 text-xl"
        ></i>
        <div
          class="absolute inset-0 rounded-full border border-secondary-400/40 dark:border-secondary-300/30 animate-pulse"
        ></div>
      </div>
      <span
        class="text-gray-800 dark:text-white/80 text-xs sm:text-sm font-semibold group-hover:text-secondary-500 dark:group-hover:text-secondary-300 transition-colors duration-300"
      >
        Install App
      </span>
      <button
        (click)="deferredPrompt = null"
        class="ml-auto text-gray-500 cursor-pointer hover:text-red-500 text-xl leading-none"
        aria-label="Close"
      >
        &times;
      </button>
    </div>
  </div>

  <div
    *ngIf="showInstallPopupIos"
    class="absolute top-40 lg:top-24 left-4 sm:left-8 lg:left-12 z-10 animate-slide-fade-in"
  >
    <div
      class="flex items-start sm:items-center gap-3 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md border border-gray-200 dark:border-gray-700 shadow-md dark:shadow-lg rounded-full px-5 py-3 transition-all duration-300 max-w-xs sm:max-w-sm animate-bounce group"
    >
      <div class="relative flex-shrink-0 mt-1 sm:mt-0">
        <i
          class="fas fa-plus text-secondary-600 dark:text-secondary-300 transform transition-transform duration-500 group-hover:scale-110 group-hover:rotate-6 text-xl"
        ></i>
        <div
          class="absolute inset-0 rounded-full border border-secondary-400/40 dark:border-secondary-300/30 animate-pulse"
        ></div>
      </div>
      <div
        class="flex flex-col text-gray-800 dark:text-white/80 text-xs sm:text-sm font-semibold"
      >
        <p>Install this app for better experience -</p>
        <p class="text-sm font-normal text-gray-600 dark:text-gray-300">
          Tap
          <span class="font-bold">
            Share
            <i class="fas fa-share text-blue-500 ml-1 text-sm"></i> </span
          >, then <span class="font-bold">"Add to Home Screen"</span>.
        </p>
      </div>
      <button
        (click)="showInstallPopupIos = false"
        class="ml-auto text-gray-500 cursor-pointer hover:text-red-500 text-xl leading-none"
        aria-label="Close"
      >
        &times;
      </button>
    </div>
  </div>

  <div class="snowflakes">
    <div
      *ngFor="let flake of snowflakes"
      class="snowflake"
      [style]="flake.style"
    ></div>
  </div>

  <div class="absolute inset-0 z-[2] pointer-events-none">
    <i
      class="fas fa-camera absolute bottom-8 left-8 text-white/20 dark:text-white/10 text-4xl"
    ></i>
    <i
      class="fas fa-map-marker-alt absolute bottom-8 right-8 text-white/20 dark:text-white/10 text-4xl"
    ></i>
    <i
      class="fas fa-route absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white/10 dark:text-white/5 text-6xl"
    ></i>
  </div>

  <img
    src="assets/Images/website-images/landing-hero-bg.webp"
    class="absolute inset-0 w-full h-full object-cover"
    alt="Hero Background"
  />
  <div
    class="absolute inset-0 bg-gradient-to-b from-black/50 via-black/30 to-black/50 dark:from-black/70 dark:via-black/50 dark:to-black/70"
  ></div>

  <div
    class="mt-10 sm:mt-6 md:mt-10 lg:mt-4 relative z-[3] flex flex-col items-center justify-center text-center text-white animate-fade-and-zoom-in max-w-7xl mx-auto px-6 md:px-16 2xl:px-0"
  >
    <h1
      class="text-3xl sm:text-4xl md:text-5xl font-bold text-white mt-4 dark:text-gray-100 leading-tight max-w-4xl"
    >
      <span
        class="relative inline-block text-transparent bg-clip-text bg-gradient-to-r from-primary-400 via-secondary-300 to-accent-500 font-bold tracking-wide drop-shadow-lg animate-gradient-move"
      >
        Explore Sikkim :
      </span>
      {{ heroData.title }}
    </h1>

    <p
      class="text-lg sm:text-xl md:text-2xl text-white/90 dark:text-gray-200/90 leading-relaxed mt-4 sm:mt-6 max-w-2xl mx-auto"
    >
      {{ heroData.subtitle }}
    </p>

    <div class="relative w-full max-w-md mx-auto mt-6 sm:mt-8 px-4 sm:px-0">
      <input
        type="text"
        placeholder="Enter destination name"
        class="w-full px-4 sm:px-6 py-3 sm:py-4 rounded-full text-gray-900 dark:text-gray-100 text-base sm:text-lg bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-primary-500/50 dark:focus:ring-primary-400/50 placeholder-gray-500 dark:placeholder-gray-400 shadow-lg dark:shadow-gray-900/50 transition-all duration-300 ease-in-out"
        [(ngModel)]="searchQuery"
        (input)="onSearchQueryChange()"
        (click)="onInputClick()"
      />
      <button
        class="cursor-pointer absolute w-10 aspect-square right-3 top-1/2 -translate-y-1/2 bg-primary-600 dark:bg-primary-500 text-white p-2 rounded-full hover:bg-primary-700 dark:hover:bg-primary-600 transition-colors duration-300"
        (click)="searchDestinations()"
      >
        <i class="fas fa-search"></i>
      </button>

      <ul
        [class.show]="showDropdown && searchQuery"
        class="dropdown absolute z-[9999] w-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-md shadow-lg rounded-lg mt-2 max-h-60 overflow-auto"
      >
        <li
          *ngFor="let destination of filteredDestinations"
          class="flex items-center gap-3 p-3 transition-all duration-200 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer"
          (click)="onDestinationClick(destination.slug)"
        >
          <img
            [src]="baseUrl + destination.image"
            alt="{{ destination.name }}"
            class="w-12 h-12 rounded object-cover"
            loading="lazy"
            (error)="imageService.handleImageError($event)"
          />
          <span class="text-gray-900 dark:text-gray-100">{{
            destination.name
          }}</span>
        </li>
      </ul>

      <ul
        [class.show]="noDestinationsFound && searchQuery"
        class="dropdown absolute z-[9999] w-full bg-white/80 dark:bg-gray-800/80 backdrop-blur-md shadow-lg rounded-lg mt-2 max-h-60 overflow-auto"
      >
        <li
          class="flex items-center gap-3 p-3 transition-all duration-200 cursor-not-allowed"
        >
          <p class="text-gray-900 dark:text-gray-100">No destinations found</p>
        </li>
      </ul>
    </div>
  </div>

  <div class="relative w-full">
    <app-home-minister-profile></app-home-minister-profile>
  </div>
</section>
